---
title: "R in 3 Months: Week 3 (Data Wrangling and Analysis)"
output:
  xaringan::moon_reader:
    css: ["style.css", "default"]
    lib_dir: libs
    df_print: paged
    nature:
      highlightStyle: github
      highlightLines: true
      countIncrementalSlides: false
      ratio: 16:9
editor_options: 
  chunk_output_type: console
---

```{r, include=FALSE, eval = TRUE}
options(htmltools.preserve.raw = FALSE)
library("tidyverse")
library("wakefield")
library(palmerpenguins)
```


# Agenda

--

1. Housekeeping

--

1. Four tips

--

1. Group Work

--

1. Next Week

---

# Housekeeping

--

- Office hours recap

--

- GitHub discussions recap

--

- Questions on project assignments?

--

- Other logistics questions? 


---

class: inverse, center, middle

# Four tips


---

class: center

## `clean_names()`

[![](https://cleanshot-cloud-fra.s3.eu-central-1.amazonaws.com/media/12517/kyFZb7K5eBw26wddoUjeUHIreZN9Z6NE2sEPj7nt.gif?X-Amz-Content-Sha256=UNSIGNED-PAYLOAD&X-Amz-Security-Token=IQoJb3JpZ2luX2VjEH8aDGV1LWNlbnRyYWwtMSJIMEYCIQCmLUILW2ujwWQTWlODvuO2q2xuMLejjWzMAicZ4Ax%2FKwIhAM6Gygtdzx3ShXNMaZnlohyDjux0Mq0jiRsj3O6vAg2MKqECCBgQABoMOTE5NTE0NDkxNjc0Igxx73US4%2FEKF4WXwVoq%2FgFpSYsal7G2WFeXLkKU5Xtv8tPMkmab8kEhDnSZa%2Bx7sZyW9arDGbVrGrI7JiE5jzArOTr2RzDaxuyh%2BCHw7%2B5LeoMzl2e%2B8g3iqGElbJyTewy8ilYKufdiGOLJSRR6p5hYrY081vTQdJMpy6H4t9NSzA4utNBBVm2sK2UNewcdeRjprBigSz4lrFYWwTGjnLYvfJW8lOudjD5TkY20gEarm13jjvbxpDaZXJKQEBY%2BWWU18bEu7EszUX3IkmrSog%2BwZq8d9mYt%2BtlDMy90Wsel35%2FbFFYxQMkGCDrj0NgRjs6vxXvxaY6zvizbmVWRWXHYefMxC4PSKWesB55C1zD49ZaSBjqZAeaZqioQA7LjY740lx7ifCI7GXTue45EvqP9zqHaY0Z14y8Ryx73EBnjclnsuC7mYkazrtuCmfSMvIuT0vY%2FiZadyYJd4LN0J%2BApRWjaJYKWuFDb4expqW%2BQBDfJ8kFKcJkBQpTf9IqnmlLNEepsKrp6v2x%2BQQyXcHS6asJgzDde3RJANB312RTEAt3g5%2B38qHyg1JgNOMENgQ%3D%3D&X-Amz-Algorithm=AWS4-HMAC-SHA256&X-Amz-Credential=ASIA5MF2VVMNPDBMHOGU%2F20220331%2Feu-central-1%2Fs3%2Faws4_request&X-Amz-Date=20220331T143611Z&X-Amz-SignedHeaders=host&X-Amz-Expires=300&X-Amz-Signature=6fe360e3c19778f9ab2256d6d48d40e82e53b22ef5ad0e10b9f3d3e191f9c037)](https://twitter.com/search?q=clean_names&src=typed_query)


---

## `clean_names()`

--

Probably the function we use more than any other

--

`clean_names()` comes from the janitor package, which [can do a ton more](https://albert-rapp.de/post/2022-01-12-janitor-showcase/):

--

- Find empty columns + rows

- Identify duplicates

- Convert Excel dates to actual dates in R

- Round in different ways

--

[Check out the documentation](http://sfirke.github.io/janitor/) if you haven't already.


---

## How R handles NA

--

SPSS has named NA values

--

In R, a value is only NA if it shows up in light gray


---

## How R handles NA

```{r eval = TRUE}
penguins
```

---

## How R handles NA

```{r eval = TRUE}
penguins %>% 
  mutate(not_actually_na = "NA")
```


---

## How R handles NA

--

> NA in the R language explicitly means missing. If you have an Excel worksheet with empty cells then these will become NA when imported into R. The drop_na() function will drop all rows which contain an NA, but can target specific columns by naming them , eg drop_na(shipment_date).

---

## Code chunk output vs assignment

This just displays the output

```{r eval = TRUE}
penguins %>% 
  filter(species == "Adelie")
```

---


## Code chunk output vs assignment

This saves the output as a new object

```{r eval = TRUE}
penguins_adelie <- penguins %>% 
  filter(species == "Adelie")
```

--

```{r}
penguins_adelie
```


???

Show why we do this in the OHDC project

---

### Code chunk output location

--

RMarkdown documents behave differently to R scripts in that (by default) output is **not send to the console**.

--

This is a personal preference, but at least one of the instructors feels very strongly about this.

---

<center>
<img src='images/code-chunk-output-below.gif' height='650px'/>
</center>


---

## read_csv() vs read.csv()

- It understands empty cells as NA automatically

- It's smarter! It will more often detect complex data types

- It's **much** faster.


---

# Data Wrangling and Analysis Questions

What questions do you still have?

---

# Typos happen to everone

.pull-left[
<img src='images/david-asking-for-help.png'/>
]

.pull-right[
```{r eval = FALSE}
library(tidyverse)
library(tidycensus)
library(janitor)

get_acs(year = 2019,
        geography = "county",
        geometry = TRUE,
        state =  "OR",
        variables = "B01003_001") %>% 
  clean_names() %>% 
  mutate(
    name = str_remove(name, " County")) %>% 
  rename(poulation = estimate,
         county = name) %>% 
  select(county, population)
```

]



---

# Group Work

- Each person share your code (either share your Gist link or by sharing your screen)

- Presenter gives a short (~1 minute overview)

- Others look for one thing that doesn't make sense

- Presenter responds to questions

---


# Next Week

--

1. Course assignment: complete data viz lessons

--

1. Project assignment: make a graph from your data

